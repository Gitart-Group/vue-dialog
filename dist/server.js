!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).index={},e.Vue)}(this,(function(e,t){"use strict";const o=(e,t="px")=>null==e||""===e?void 0:isNaN(+e)?String(e):`${Number(e)}${t}`,l=e=>{if(!e||e.nodeType!==Node.ELEMENT_NODE)return 0;const t=parseInt(window.getComputedStyle(e).getPropertyValue("z-index"));return t||l(e.parentNode)},n=({activeElSelector:e,stackMinZIndex:o=0,isActive:n,content:a})=>({activeZIndex:t.computed((()=>{if(!a.value)return 0;const t=n.value?((t=[])=>{const n=[o],a=document.querySelectorAll(e);for(let e=0;e<a.length;e++)t.includes(a[e])||n.push(l(a[e]));return Math.max(...n)})([a.value])+2:l(a.value);return null===t?0:t}))}),a=e=>{if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return["auto","scroll"].includes(t.overflowY)&&e.scrollHeight>e.clientHeight},i=(e,t)=>0===e.scrollTop&&t<0||e.scrollTop+e.clientHeight===e.scrollHeight&&t>0,r=(e,t)=>{const o=(e=>{if(e.composedPath)return e.composedPath();const t=[];let o=e.target;for(;o;){if(t.push(o),"HTML"===o.tagName)return t.push(document),t.push(window),t;o=o.parentElement}return t})(e),l=e.deltaY;for(let n=0;n<o.length;n++){const e=o[n];if(e===document)return!0;if(e===document.documentElement)return!0;if(e===t)return!0;if(a(e))return i(e,l)}return!0};var d=t.defineComponent({name:"GDialogOverlay",props:{active:{type:Boolean,required:!0},deactivating:{type:Boolean,required:!0},activeZIndex:{type:Number,required:!0}},emits:["click"],setup:(e,{emit:o})=>({styles:t.computed((()=>({zIndex:e.activeZIndex-1}))),classes:t.computed((()=>["g-dialog-overlay",{"g-dialog-overlay--active":e.active&&!e.deactivating}])),onClick:()=>{o("click")}})});d.render=function(e,o,l,n,a,i){return t.openBlock(),t.createBlock(t.Transition,{name:"fade"},{default:t.withCtx((()=>[e.active?(t.openBlock(),t.createBlock("div",{key:0,class:e.classes,style:e.styles,onClick:o[1]||(o[1]=(...t)=>e.onClick&&e.onClick(...t))},null,6)):t.createCommentVNode("",!0)])),_:1})};var c=t.defineComponent({name:"GDialogContent",props:{maxWidth:{type:[String,Number],default:"none"},width:{type:[String,Number],default:"auto"},height:{type:[String,Number],default:"auto"},scrollable:{type:Boolean,default:!1},depressed:{type:Boolean,default:!1}},setup(e){const{sizeStyles:l}=(e=>({sizeStyles:t.computed((()=>({maxWidth:"none"===e.maxWidth?void 0:o(e.maxWidth),width:"auto"===e.width?void 0:o(e.width),height:"auto"===e.height?void 0:o(e.height)})))}))(e);return{styles:l,classes:t.computed((()=>["g-dialog-content",{"g-dialog-content--scrollable":e.scrollable,"g-dialog-content--depressed":e.depressed}]))}}});c.render=function(e,o,l,n,a,i){return t.openBlock(),t.createBlock("div",{class:e.classes,style:e.styles},[t.renderSlot(e.$slots,"default")],6)};var u=t.defineComponent({name:"GDialog",components:{GDialogOverlay:d,GDialogContent:c},props:{modelValue:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},lockScrollPadding:{type:Boolean,default:!0},persistent:{type:Boolean,default:!1},maxWidth:{type:[String,Number],default:"none"},width:{type:[String,Number],default:"auto"},height:{type:[String,Number],default:"auto"},scrollable:{type:Boolean,default:!1},depressed:{type:Boolean,default:!1},hideScrollbar:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:o}){const l=t.ref(),a=t.ref(),i=t.computed((()=>{var e;return null==(e=a.value)?void 0:e.$el})),{activatedOnce:d,active:c,deactivating:u}=(e=>{const o=t.ref(e.value),l=t.ref(e.value),n=t.ref(!1);return t.watch((()=>e.value),(e=>{if(!e)return n.value=!0,void t.nextTick((()=>{l.value=e,n.value=!1}));o.value?l.value=e:(o.value=!0,t.nextTick((()=>{l.value=e})))})),{activatedOnce:o,active:l,deactivating:n}})(t.computed((()=>e.modelValue))),{activeZIndex:s}=n({activeElSelector:".g-dialog-frame--active",stackMinZIndex:200,isActive:c,content:l}),v=t.computed((()=>["g-dialog-frame",{"g-dialog-frame--active":c.value}])),p=t.computed((()=>({zIndex:s.value}))),{enableScroll:m,disableScroll:f}=(({overlay:e,content:t})=>{let o=!1;const l=o=>{(o.target===e.value||o.target===document.body||r(o,t.value))&&o.preventDefault()};return{disableScroll:()=>{o||(window.addEventListener("wheel",l,{passive:!1}),o=!0)},enableScroll:()=>{o&&(window.removeEventListener("wheel",l),o=!1)}}})({overlay:i,content:l});return t.watch(c,(e=>{e?f():m()})),t.onBeforeUnmount((()=>{m()})),{onClickOutside:()=>{e.persistent||o("update:modelValue",!1)},activatedOnce:d,activeZIndex:s,isActive:c,deactivating:u,classes:v,styles:p,contentFrame:l,overlay:a}}});u.render=function(e,o,l,n,a,i){const r=t.resolveComponent("GDialogOverlay"),d=t.resolveComponent("GDialogContent");return e.activatedOnce?(t.openBlock(),t.createBlock(t.Teleport,{key:0,to:"body"},[t.createVNode(r,{ref:"overlay",active:e.isActive,deactivating:e.deactivating,"active-z-index":e.activeZIndex,onClick:e.onClickOutside},null,8,["active","deactivating","active-z-index","onClick"]),t.createVNode(t.Transition,{name:"dialog-transition"},{default:t.withCtx((()=>[t.withDirectives(t.createVNode("div",{ref:"contentFrame",class:e.classes,style:e.styles},[t.createVNode(d,{"max-width":e.maxWidth,width:e.width,height:e.height,scrollable:e.scrollable,depressed:e.depressed},{default:t.withCtx((()=>[t.renderSlot(e.$slots,"default")])),_:3},8,["max-width","width","height","scrollable","depressed"])],6),[[t.vShow,e.isActive]])])),_:1})])):t.createCommentVNode("",!0)},e.GDialog=u,Object.defineProperty(e,"__esModule",{value:!0}),e[Symbol.toStringTag]="Module"}));
